<body>
 <main>
  
  <% if flash[:notice] %>
    <%= flash[:notice] %>
  <% end %>
  <% if @book.errors.any? %>
   <%= @book.errors.count %>error
    <ul>
     <% @book.errors.full_messages.each do |message| %>
      <li><%= message %></li>
     <% end %>
    </ul>
  <% end %>
   <p id="notice"></p>

  
  <div class="container px-5 px-sm-0">
   <div class="row">
    <div class="col-md-3">
    
  <h2>User info</h2>
  <% if @book.user.avatar.attached? %> 
   <%= image_tag @book.user.avatar, size: "100x100" %>
  <% else %>
    <%= image_tag 'default-image', size: "100x100" %>
  <% end %> 
  <table class="table table-hover table-inverse custom-table">
    <tr>
      <th class="text-left">name</th>
      <td><%= @book.user.name %></td>
    </tr>
    <tr>
      <th class="text-left">introduction</th>
      <td><%= @book.user.introduction %></td>
    </tr>
  </table>
  <div class="row">
    <%= link_to edit_user_path(@book.user), class: 'btn btn-outline-secondary btn-block' do %>
      <i class="fa-solid fa-user-gear" style="color: #696e77;"></i>
    <% end %> 
  </div>


<%= form_with model: Book.new, local: true do |f| %>
  <h2 class="mt-3">New book</h2>
  <div class="form-group">
    <%= f.label :title %><br />
    <%= f.text_field :title %><br>
  </div>
  <div class="form-group">
    <%= f.label :opinion %><br />
    <%= f.text_area :body %>
  </div>
  <div class="actions">
    <%= f.submit "Create Book", class: "btn btn-success" %>
  </div>
  
<% end %>

    </div>

   
    <div class="col-md-8 offset-md-1">
      <table class="table table-hover table-inverse custom-table">
     <h2>Book detaill</h2>

     <tr>
      <td>
     <% if user_signed_in? %>
     <% if @book.user.avatar.attached? %>
      <%= image_tag @book.user.avatar, size: "100x100" %>
     <% else %>
      <%= image_tag 'default-image', size: "100x100" %>
     <% end %> 
     <% end %>
     <br>
<% if user_signed_in? %>
  <% if @book.user == current_user %>
    <%= link_to current_user.name, user_path(current_user) %>
  <% else %>
    <%= link_to @book.user.name, user_path(@book.user) %>
  <% end %>
<% else %>
  <%= link_to @book.user.name, user_path(@book.user) %>
<% end %>

      </td>
      <td>
       <%= link_to @book.title, book_path(@book) %>
      </td>
      <td>
       <%= @book.body %>
      </td>
      <td>
      <% if user_signed_in? && @book.user == current_user %>
       <%= link_to "Edit", edit_book_path(@book), class: "btn btn-success btn-sm" %>
      <% end %>
      </td>
      <td>
      <% if user_signed_in? && @book.user == current_user %>
       <%= link_to "Destroy", book_path(@book), method: :delete, data: { confirm: "Are you sure?" }, class:"btn btn-sm btn-danger" %>
      <% end %> 
      </td>

       </td>
      </tr>
     </table>
   </div>
  </div>
 </main>
</body>