<body>
 <main>
  <p id="notice"><%= flash[:notice] %></p>
  <% if flash[:notice] %>
   <p id="alert"><%= flash[:alert] %></p>
  <% end %>

  <div class="container px-5 px-sm-0">
   <div class="row">
    <div class="col-md-3">
    
<% if user_signed_in? %>
  <h2>User info</h2>
  <% if current_user.avatar.attached? %>
    <%= image_tag current_user.avatar, size: "100x100" %>
  <% else %>
    <%= image_tag 'default-image', size: "100x100" %>
  <% end %> 
  <table class="table table-hover table-inverse custom-table">
    <tr>
      <th class="text-left">name</th>
      <td><%= current_user.name %></td>
    </tr>
    <tr>
      <th class="text-left">introduction</th>
      <td><%= current_user.introduction %></td>
    </tr>
  </table>
  <div class="row">
    <%= link_to edit_user_path(current_user), class: 'btn btn-outline-secondary btn-block' do %>
      <i class="fa-solid fa-user-gear" style="color: #696e77;"></i>
    <% end %> 
  </div>
<% end %>

<%= form_with model: Book.new, local: true do |f| %>
  <h2 class="mt-3">New book</h2>
  <div class="form-group">
    <%= f.label :title %><br />
    <%= f.text_field :title %><br>
  </div>
  <div class="form-group">
    <%= f.label :opinion %><br />
    <%= f.text_area :body %>
  </div>
  <div class="actions">
    <%= f.submit "Create Book", class: "btn btn-success" %>
  </div>
  
<% end %>

    </div>

   
    <div class="col-md-8 offset-md-1">
      <table class="table table-hover table-inverse custom-table">
       <h2>Books</h2>
      <thead>
        <tr>
         <th></th>
         <th class="text">Title</th>
         <th class="text">Opinion</th>
         <th colspan="3"></th>
        </tr>
       </thead>

    <% @books.each do |book| %>
    
     <tr>
      <td>
      <% if book.user.avatar.attached? %>
        <%= image_tag book.user.avatar, size: "100x100" %>
      <% else %>
        <%= image_tag 'default-image', size: "100x100" %>
      <% end %>
      </td>
      <td>
       <%= link_to book.title, book_path(book) %>
      </td>
      <td>
       <%= book.body %>
      </td>
     </tr>
    <% end %>
     </table>
   </div>
  </div>
 </main>
</body>